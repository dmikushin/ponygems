<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
canvas {
	display:block;
}

body {
	margin:0;
}
</style>
<script>
function makeGame()
{
	gameMap.make();
}

var gameMap =
{
	canvas : document.createElement("canvas"),

	img : document.createElement("img"),

	npoints : 0,

	make : function()
	{
		this.canvas.width = window.innerWidth;
		this.canvas.height = window.innerHeight;

		this.ctx = this.canvas.getContext("2d");
		var game = document.getElementById("game");
		game.append(this.canvas);

		this.img.src = "map.jpg";
		var gameMap = this;
		this.img.onload = function()
		{
			gameMap.redraw();
		}

		// Resize the canvas to fill browser window dynamically
		window.onresize = function()
		{
			gameMap.canvas.width = window.innerWidth;
			gameMap.canvas.height = window.innerHeight;

			gameMap.redraw();
		}

		this.canvas.onclick = function(e)
		{
			var rect = gameMap.canvas.getBoundingClientRect();

			gameMap.ctx.beginPath();
			gameMap.ctx.fillStyle = "white";
			gameMap.ctx.strokeStyle = "red";
			r = 10;
			gameMap.ctx.arc(e.clientX - rect.left, e.clientY - rect.top, r, 0, 2 * Math.PI);
			gameMap.ctx.fill();
			gameMap.ctx.stroke();

			console.log(gameMap.npoints + ": (" + (e.clientX - rect.left) + ", " +
				(e.clientY - rect.top) + ")");
			gameMap.npoints++;
		}
	},

	redraw : function()
	{
		this.ctx.drawImage(this.img, 0, 0, this.canvas.width, this.canvas.height);
	},

	clear : function()
	{
		this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
	}
}
</script>
<body onload="makeGame()">
<div id="game"></div>
</body>
